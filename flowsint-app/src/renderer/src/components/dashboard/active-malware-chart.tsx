import { Card } from '@/components/ui/card';
import { ChartContainer, ChartTooltip, ChartTooltipContent } from '@/components/ui/chart';
import { PieChart, Pie, Cell, ResponsiveContainer } from 'recharts';

const chartData = [
    { name: 'Beacon', value: 24.4, color: 'var(--chart-1)' },
    { name: 'Mirai', value: 17.6, color: 'var(--chart-2)' },
    { name: 'Android', value: 10.7, color: 'var(--chart-3)' },
    { name: 'Trojan', value: 10.2, color: 'var(--chart-4)' },
    { name: 'RAT', value: 8.1, color: 'var(--chart-5)' },
    { name: 'Mozi', value: 6.8, color: 'var(--primary)' },
    { name: 'APT29', value: 6.5, color: 'var(--accent)' },
    { name: 'Emotet', value: 6.3, color: 'var(--muted-foreground)' },
    { name: 'Linux', value: 4.9, color: 'var(--secondary)' },
    { name: 'Qakbot', value: 4.5, color: 'var(--ring)' },
];

const chartConfig = {
    value: {
        label: 'Percentage',
    },
};

export function ActiveMalwareChart() {
    return (
        <Card className="p-6">
            <div className="mb-6">
                <h3 className="text-lg font-semibold mb-2">Active Malware</h3>
            </div>
            <ChartContainer config={chartConfig} className="h-[450px]">
                <PieChart>
                    <Pie
                        data={chartData}
                        cx="50%"
                        cy="50%"
                        innerRadius={60}
                        outerRadius={100}
                        paddingAngle={2}
                        dataKey="value"
                    >
                        {chartData.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                        ))}
                    </Pie>
                    <ChartTooltip 
                        content={({ active, payload }) => {
                            if (active && payload && payload.length) {
                                const data = payload[0];
                                return (
                                    <div className="bg-background border border-border rounded-lg px-3 py-2 shadow-lg">
                                        <p className="font-medium">{data.payload.name}</p>
                                        <p className="text-sm text-muted-foreground">
                                            {data.value}%
                                        </p>
                                    </div>
                                );
                            }
                            return null;
                        }}
                    />
                </PieChart>
            </ChartContainer>
            <div className="grid grid-cols-2 gap-2 mt-4 text-xs">
                {chartData.map((item, index) => (
                    <div key={index} className="flex items-center gap-2">
                        <div 
                            className="w-3 h-3 rounded-full"
                            style={{ backgroundColor: item.color }}
                        />
                        <span className="text-muted-foreground flex-1">{item.name}</span>
                        <span className="font-medium">{item.value}%</span>
                    </div>
                ))}
            </div>
        </Card>
    );
} 